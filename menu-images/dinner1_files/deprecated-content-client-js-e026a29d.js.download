import"./faceplate-batch-56c41e54.js";import"./faceplate-switch-input-28aa6e16.js";import{E as t,m as e,T as n,t as i,b as r,_ as s,o,W as a,a as l,c as p,d}from"./shell-e562dec5.js";import{_ as c,j as h,n as u,h as b,s as f,i as m,x as w,o as v}from"./icon-19348c80.js";import"./shreddit-signup-drawer-2c5d2310.js";import{m as x,a as g,B as y}from"./xpromo-0ff0c43f.js";import{A as k}from"./app-link-cb9bf691.js";import"./checked-input-element-2d7d1dfc.js";import"./faceplate-input-23a10a98.js";import"./input-element-d66dab92.js";import"./form-common-utils-2b0cb095.js";import"./constants-998a49d3.js";import"./scroll-blocker-7768d653.js";import"./constants-97f2b567.js";import"./onboarding-f83e7703.js";import"./shreddit-overlay-850f15ec.js";import"./index-7e22ae81.js";import"./contextualSignupPrompt-cad3300a.js";var C,N;!function(t){t.Slot="slot",t.Wrap="wrap"}(C||(C={})),function(t){t.NSFW="nsfw",t.Spoiler="spoiler",t.NsfwAndSpoiler="nsfwAndSpoiler"}(N||(N={}));const A=t=>{switch(t){case N.Spoiler:return"View spoiler";case N.NsfwAndSpoiler:return"View NSFW content & spoilers";default:return"View NSFW content"}};let S=class extends f{constructor(){super(),this.blurred=!0,this.isNsfwAllowed=!0,this.blurRadius=40,this.mode=C.Slot,this.isCrosspost=!1,this.isRichtextContent=!1,this.hasMetadata=!1,this._windowEvents=new t(this,(()=>window)),this.handleNsfwEvent=t=>{const n=t.detail.details||t.detail;if("xpromo/view/nsfw_blur"===e(n)){this.isNsfwAllowed=!1;const t=this.querySelector('div[slot="revealed"]');t&&this.removeChild(t)}},this._windowEvents.define(n,this.handleNsfwEvent)}static get styles(){return[i,m`.outer{width:100%;overflow:hidden;z-index:0;position:relative}.overlay{cursor:pointer;position:absolute;width:100%;height:100%;top:0;left:0;z-index:1;display:flex;justify-content:center;align-items:center}.inner.blurred{display:block;pointer-events:none;background:rgba(0,0,0,.8)}.legacy-button{background:rgba(0,0,0,.07);border:1px solid #fff;color:#fff;padding:10px 20px;position:absolute;text-transform:uppercase;cursor:pointer}`]}renderOverlay(t){const e=this.reason?r({appearance:"media",size:s.Small,shape:"pill",children:A(this.reason)}):w``;return this.reason===N.Spoiler&&this.blurred?w`${j({content:e})}`:this.isNsfwAllowed&&this.blurred&&t?j({content:e}):""}render(){const t=this.isRichtextContent&&this.blurred,e=this.reason===N.NSFW||this.reason===N.NsfwAndSpoiler;return w`\n <div \n class="${o({outer:!0,"xs:rounded-t-[16px]":!!this.reason&&!this.isCrosspost&&this.blurred,"xs:rounded-b-[16px]":!!this.reason&&!this.isCrosspost&&(t||!this.hasMetadata)&&this.blurred,"h-[88px]":t,"h-full":!t})}" \n @click="${this.handleClick}" \n>\n ${this.renderOverlay(e)}\n <span \n class="${o({inner:!0,blurred:this.blurRadius>0&&this.blurred})}" \n style="${v({filter:this.blurred&&this.blurRadius>0&&`blur(${this.blurRadius}px)`||"none"})}" \n aria-hidden="${Boolean(this.blurred)}" \n aria-live="polite" \n>\n ${this.mode===C.Slot&&this.blurred?w` <slot name="blurred"></slot> `:w` <slot name="revealed"></slot> `}\n </span>\n\n ${this.blurred?w`<div class="absolute top-0 left-0 w-full h-full bg-scrim"></div>`:""}\n </div>\n `}handleClick(){const t=this.reason===N.NSFW||this.reason===N.NsfwAndSpoiler;(this.reason===N.Spoiler&&this.blurred||this.blurred&&t)&&(this.isNsfwAllowed||this.reason===N.Spoiler)&&(this.blurred=!1)}};c([h()],S.prototype,"blurred",void 0),c([h()],S.prototype,"isNsfwAllowed",void 0),c([u({type:Number,attribute:"blur-radius"})],S.prototype,"blurRadius",void 0),c([u({type:String})],S.prototype,"reason",void 0),c([u({type:String})],S.prototype,"mode",void 0),c([u({type:Boolean,attribute:"is-crosspost"})],S.prototype,"isCrosspost",void 0),c([u({type:Boolean,attribute:"is-richtext-content"})],S.prototype,"isRichtextContent",void 0),c([u({type:Boolean,attribute:"has-metadata"})],S.prototype,"hasMetadata",void 0),S=c([b("shreddit-blurred-container")],S);const j=({content:t})=>w`<div data-ignore-click-interception class="overlay">${t}</div>`,E=a(f);let $=class extends E{constructor(){super(...arguments),this.isNsfw=!1,this.isNsfwActive=!1,this.activate=()=>{this.isNsfwActive=this.isNsfw,this.requestUpdate()}}connectedCallback(){super.connectedCallback(),this.subscribe(l.TriggerNsfwBlockingExperience,this.activate)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe(l.TriggerNsfwBlockingExperience,this.activate)}static get styles(){return[i,m`:host{display:block;width:100%;height:100%}`]}render(){return w`\n <div class="w-full h-full ${this.isNsfwActive?"hidden":""}">\n <slot></slot>\n </div>\n `}};c([u({type:Boolean})],$.prototype,"isNsfw",void 0),$=c([b("shreddit-profile-banner")],$);const B=p(f);let M=class extends B{constructor(){super(...arguments),this.poster=""}static get styles(){return d(":host {\n  background-color: black;\n  display: block;\n  height: 100%;\n  overflow: hidden;\n  position: relative;\n}\n.poster,\n.prompt {\n  bottom: 0;\n  left: 0;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n.poster {\n  filter: blur(6px);\n  opacity: 0.55;\n  z-index: 0;\n}\n.prompt {\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  z-index: 1;\n}\n.text {\n  color: hsla(0, 0%, 100%, 0.8);\n  font: var(--font-title-h4);\n  margin: 0;\n  max-width: 300px;\n  text-align: center;\n}\n@media (max-width: 320px) {\n  .text {\n    margin: 12px 0 20px;\n  }\n}\n")}firstUpdated(){this.trackEvent(x())}render(){return w`\n <shreddit-img \n alt="Media error" \n class="poster" \n loading="eager" \n objectfit="contain" \n .src="${this.poster}" \n></shreddit-img>\n <div class="prompt">\n <p class="text">\n Sorry, something went wrong when loading this video.\n </p>\n <slot name="button"></slot>\n </div>\n `}};c([u({type:String})],M.prototype,"poster",void 0),M=c([b("xpromo-media-error")],M);const L=a(p(f));let I=class extends L{constructor(){super(...arguments),this.appLinkParams={},this._appLinkController=new k(this)}static get styles(){return[i,d(".MediaErrorButton {\n  overflow: hidden;text-overflow: ellipsis;white-space: nowrap;\n}\n.MediaErrorButton {\n  --button-color-text: var(--color-global-white);\n  --button-border-color: var(--color-global-white);\n  border-radius: 3px;\n  text-transform: uppercase;\n  margin-top: 24px;\n}\n.MediaErrorButton,\n.MediaErrorButton:link,\n.MediaErrorButton:visited,\n.MediaErrorButton:active {\n  text-decoration: none;\n}\n")]}onViewInAppClick(){this.trackEvent(g(y.GetApp)),this._appLinkController.handleOpenInAppClick()}render(){return w`\n <shreddit-interactable-element @interactionEvent="${this.onViewInAppClick}">\n ${r({attributes:{className:"MediaErrorButton",rel:"nofollow",href:this._appLinkController.getAppLink(this.appLinkParams)},size:s.Medium,appearance:"bordered",children:"View in app"})}\n </shreddit-interactable-element>\n `}};c([u({type:Object,attribute:"app-link-params"})],I.prototype,"appLinkParams",void 0),I=c([b("xpromo-media-error-button")],I);const _=a(f);let z=class extends _{constructor(){super(...arguments),this.appLinkParams={},this._appLinkController=new k(this),this.active=!1,this.blurredContainer=null,this.activate=()=>{this.blurredContainer&&this.blurredContainer.setAttribute("blurred",""),this.active=!0,this.requestUpdate()},this.handleSlotchange=t=>{if(!(t.target instanceof HTMLSlotElement))return;const e=t.target.assignedNodes({flatten:!0});for(const t of e)if(t instanceof S){this.blurredContainer=t,this.active||this.blurredContainer.removeAttribute("blurred");break}}}connectedCallback(){super.connectedCallback(),this.subscribe(l.TriggerNsfwBlockingExperience,this.activate)}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe(l.TriggerNsfwBlockingExperience,this.activate)}static get styles(){return[i,d(".viewInApp {\n  overflow: hidden;text-overflow: ellipsis;white-space: nowrap;\n}\n:host {\n  display: block;\n  position: relative;\n  height: 100%;\n}\n.prompt.hidden {\n  display: none;\n}\n.prompt {\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.45);\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  left: 0;\n  justify-content: center;\n  position: absolute;\n  top: 0;\n  width: 100%;\n}\n.icon {\n  color: hsla(0, 0%, 100%, 0.6);\n  font-size: 36px;\n  text-align: center;\n}\n.title,\n.text {\n  color: hsla(0, 0%, 100%, 0.8);\n  max-width: 300px;\n  text-align: center;\n}\n.title {\n  font: var(--font-title-h3);\n  margin: 18px 0 0;\n}\n.text {\n  font: var(--font-title-h4);\n  font-weight: normal;\n  margin: 10px 0 24px;\n}\n@media (max-width: 320px) {\n  .text {\n    margin: 12px 0 20px;\n  }\n}\n.viewInApp {\n  flex-shrink: 0;\n  --button-color-text: var(--color-global-white);\n  --button-border-color: var(--color-global-white);\n  border-radius: 3px;\n  text-transform: uppercase;\n}\n.viewInApp,\n.viewInApp:link,\n.viewInApp:visited,\n.viewInApp:active {\n  text-decoration: none;\n}\n")]}render(){return w`\n <slot @slotchange="${this.handleSlotchange}"></slot>\n <div class="prompt ${this.active?"":"hidden"}">\n <div class="icon">\n <icon-nsfw fill></icon-nsfw>\n </div>\n <h3 class="title">\n Mature Content\n </h3>\n <p class="text">\n This is mature content and may not be appropriate for certain viewers. To continue, use the app to verify you\u2019re over 18 and browse anonymously.\n </p>\n ${r({attributes:{className:"viewInApp",rel:"nofollow",href:this._appLinkController.getAppLink(this.appLinkParams)},size:s.Medium,appearance:"secondary",children:"View in app"})}\n </div>\n `}};c([u({type:Object,attribute:"app-link-params"})],z.prototype,"appLinkParams",void 0),z=c([b("xpromo-nsfw-blocking-container")],z);
//# sourceMappingURL=deprecated-content-client-js-e026a29d.js.map
